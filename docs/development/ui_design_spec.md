# 天巡散货堆场体积量测系统 - 界面设计文档

## 一、整体架构更新

### 1.1 导航结构调整

应用采用响应式左侧导航+主内容区布局，包含8个核心模块：

- 入口页面 (index.html) - 系统入口重定向
- 仪表盘 (dashboard.html) - 【角色1】全国宏观监控
- 数据管理 (data_management.html) - PDM工具集成
- 任务管理 (task_management.html) - 三种任务类型
- 三维展示 (3d_visualization.html) - 可视化+手动清表
- 结果分析 (result_analysis.html) - 【角色2】深度分析
- 报告管理 (report_management.html) - 报告生成下载
- 系统设置 (system_settings.html) - 参数配置

### 1.2 用户角色切换

顶部导航增加角色切换功能：
[角色1：全国监控] | [角色2：堆场分析]

## 二、详细界面设计

### 1. 入口页面 (index.html)

```
+--------------------------------------------------+
|               天巡散货体积量测系统                  |
|                                                  |
|          🏢 基于天际航技术平台构建                   |
|                                                  |
|    ┌─────────────────────────────────────────┐   |
|    │                                         │   |
|    │         🚀 系统初始化中...                │   |
|    │                                         │   |
|    │     ████████████░░ 80%                  │   |
|    │                                         │   |
|    │   正在加载用户配置和权限信息...              │   |
|    │                                         │   |
|    └─────────────────────────────────────────┘   |
|                                                  |
|            自动跳转至仪表盘 (3秒后)                |
|                                                  |
+--------------------------------------------------+
```

### 2. 仪表盘 (dashboard.html) - 【角色1：全国宏观监控】

```
+--------------------------------------------------+
| 天巡散货体积监测系统   [角色1:全国监控▼] 👤用户名 |
+----------+---------------------------------------+
|左侧导航   | 仪表盘 - 全国散货堆场监控总览           |
|- 🏠仪表盘 |                                      |
|- 📊数据管理| 🌏 全国堆场分布图                      |
|- ⚙️任务管理| ┌─────────────────────────────────┐   |
|- 🎯三维展示| │    [交互式地图]                   │   |
|- 📈结果分析| │ • 华东: 15个堆场 (在线:13)        │   |
|- 📋报告管理| │ • 华南: 8个堆场  (在线:7)         │   |
|- ⚙️系统设置| │ • 华北: 12个堆场 (在线:11)        │   |
|          | └─────────────────────────────────┘   |
|          |                                      |
|          | 📊 全国关键指标 (今日)                 |
|          | ┌─────┬─────┬─────┬─────────┐       |
|          | │总堆场│待处理│处理中│已完成任务│       |
|          | │ 35  │ 12  │ 8   │   156   │       |
|          | └─────┴─────┴─────┴─────────┘       |
|          |                                      |
|          | 📈 全国体积趋势 (近30天)               |
|          | [体积变化趋势图 - 可切换不同区域]        |
|          |                                      |
|          | ⚠️ 异常预警                            |
|          | • 青岛港A区: 任务执行异常 [查看详情]     |
|          | • 日照港: AI清表精度低于阈值 [处理]     |
|          |                                      |
|          | 🔄 实时任务状态                        |
|          | [任务进度表 - 显示各堆场当前任务状态]    |
+----------+---------------------------------------+
```

### 3. 数据管理 (data_management.html) - PDM工具集成

```
+--------------------------------------------------+
| 天巡散货体积监测系统   [角色切换▼] 👤用户名        |
+----------+---------------------------------------+
|左侧导航   | 数据管理 - PDM工具集成                 |
|- 🏠仪表盘 |                                      |
|- 📊数据管理| 🏗️ 堆场项目选择                        |
|- ⚙️任务管理| ┌─────────────────────────────────┐   |
|- 🎯三维展示| │选择堆场: [龙口煤场 ▼]             │   |
|- 📈结果分析| │项目编号: LK-2024-0827             │   |
|- 📋报告管理| │负责人: 张工程师                   │   |
|- ⚙️系统设置| └─────────────────────────────────┘   |
|          |                                      |
|          | 📤 PDM数据上传                        |
|          | ┌─────────────────────────────────┐   |
|          | │ 🔌 PDM客户端状态: ✅已连接         │   |
|          | │                                │   |
|          | │ 📁 选择数据源                   │   |
|          | │ • 本地文件夹: [选择路径]         │   |
|          | │ • 无人机型号: [DJI Phantom 4▼]  │   |
|          | │ • 数据格式: JPG/RAW             │   |
|          | │                                │   |
|          | │ ⚙️ 飞行参数                     │   |
|          | │ • 飞行高度: [120] m             │   |
|          | │ • 航向重叠: [70] %              │   |
|          | │ • 旁向重叠: [60] %              │   |
|          | │ • GPS精度: [±2m]               │   |
|          | │                                │   |
|          | │ 📊 上传进度                     │   |
|          | │ ████████████░░ 82% (1.2GB/1.5GB)│   |
|          | │ 断点续传支持 ✅                │   |
|          | │                                │   |
|          | │    [暂停上传] [取消上传]        │   |
|          | └─────────────────────────────────┘   |
|          |                                      |
|          | 📋 历史数据查询                        |
|          | 时间范围: [2024-08-01▼] 至 [今天▼]     |
|          | [查询] [导出列表]                      |
+----------+---------------------------------------+
```

### 4. 任务管理 (task_management.html) - 三种任务类型

```
+--------------------------------------------------+
| 天巡散货体积监测系统   [角色切换▼] 👤用户名        |
+----------+---------------------------------------+
|左侧导航   | 任务管理 - 智能工作流调度               |
|- 🏠仪表盘 |                                      |
|- 📊数据管理| 🚀 创建新任务                          |
|- ⚙️任务管理| ┌─────────────────────────────────┐   |
|- 🎯三维展示| │ 📋 任务类型选择:                   │   |
|- 📈结果分析| │                                │   |
|- 📋报告管理| │ ○ 全流程解算                     │   |
|- ⚙️系统设置| │   三维重建→分堆→清表→体积计算      │   |
|          | │   💡 适用: 标准场景，AI清表良好    │   |
|          | │                                │   |
|          | │ ○ 清表+体积计算                  │   |
|          | │   按清表标记→体积计算             │   |
|          | │   💡 适用: 需手动清表修正         │   |
|          | │                                │   |
|          | │ ○ 三维重建+分堆                  │   |
|          | │   三维重建→分堆                  │   |
|          | │   💡 适用: 云端算力服务，下载模型  │   |
|          | │                                │   |
|          | │ 📂 数据源: [选择已上传数据▼]      │   |
|          | │ 📅 计划执行时间: [立即/定时▼]     │   |
|          | │                                │   |
|          | │        [创建任务]               │   |
|          | └─────────────────────────────────┘   |
|          |                                      |
|          | 📊 任务监控面板                        |
|          | ┌─────┬─────────┬──────┬──────┬───┐ |
|          | │任务ID│任务类型  │堆场   │状态   │操作│ |
|          | ├─────┼─────────┼──────┼──────┼───┤ |
|          | │T2024│全流程解算│龙口煤场│🟢执行中│⏸️│ |
|          | │0827 │         │      │ 67%  │📊 │ |
|          | │T2024│清表+体积│青岛港A│⏳排队│▶️ │ |
|          | │0826 │计算     │      │      │🗑️│ |
|          | │T2024│三维重建+│日照港 │✅完成 │📋 │ |
|          | │0825 │分堆     │西区   │      │📥 │ |
|          | └─────┴─────────┴──────┴──────┴───┘ |
|          |                                      |
|          | 🔍 高级筛选: [全部▼] [今日▼] [搜索框]  |
+----------+---------------------------------------+
```

### 5. 三维展示 (3d_visualization.html) - 可视化+手动清表

```
+--------------------------------------------------+
| 天巡散货体积监测系统   [角色切换▼] 👤用户名        |
+----------+---------------------------------------+
|左侧导航   | 三维展示 - 龙口煤场 [项目切换▼]        |
|- 🏠仪表盘 | ┌─────────────────────────────────┐   |
|- 📊数据管理| │ 🎮 工具栏                        │   |
|- ⚙️任务管理| │ 🔄旋转 📐测量 🏷️标注 🧹清表标记  │   |
|- 🎯三维展示| │ 👁️点云 🌐网格 🎨纹理 📦线框     │   |
|- 📈结果分析| └─────────────────────────────────┘   |
|- 📋报告管理| ┌─────────────────────────────────┐   |
|- ⚙️系统设置| │                                │   |
|          | │     [交互式3D模型视图]           │   |
|          | │                                │   |
|          | │   🎯 当前选中: 煤堆P003          │   |
|          | │   📊 体积: 2,345.7 m³           │   |
|          | │   🏷️ 状态: 需要清表              │   |
|          | │                                │   |
|          | │   鼠标操作:                     │   |
|          | │   • 左键: 选择/旋转              │   |
|          | │   • 右键: 平移                  │   |
|          | │   • 滚轮: 缩放                  │   |
|          | │   • Ctrl+左键: 多选             │   |
|          | └─────────────────────────────────┘   |
|          |                                      |
|          | 🗂️ 堆体管理面板                       |
|          | ┌─────┬────────┬──────┬─────────┐    |
|          | │堆体ID│体积(m³) │状态   │操作      │    |
|          | ├─────┼────────┼──────┼─────────┤    |
|          | │P001 │1,256.3 │✅已确认│👁️查看   │    |
|          | │P002 │2,345.7 │⚠️需清表│✏️编辑   │    |
|          | │P003 │  892.1 │🔄处理中│⏸️暂停   │    |
|          | └─────┴────────┴──────┴─────────┘    |
|          |                                      |
|          | 🧹 手动清表操作                        |
|          | • 选择清理区域: [框选/圈选/多边形]     |
|          | • 清表类型: [土堆▼] [设备▼] [杂物▼]   |
|          | • [标记清理] [撤销] [保存标记]         |
|          |                                      |
|          | 💾 保存的清表标记: 3个区域             |
|          | [应用到新任务] [导出标记文件]          |
+----------+---------------------------------------+
```

### 6. 结果分析 (result_analysis.html) - 【角色2：深度分析】

```
+--------------------------------------------------+
| 天巡散货体积监测系统   [角色2:堆场分析▼] 👤用户名  |
+----------+---------------------------------------+
|左侧导航   | 结果分析 - 龙口煤场深度分析             |
|- 🏠仪表盘 |                                      |
|- 📊数据管理| 🏗️ 堆场信息                           |
|- ⚙️任务管理| • 堆场名称: 龙口煤场                   |
|- 🎯三维展示| • 总面积: 15,680 m²                   |
|- 📈结果分析| • 监测周期: 2024-07-01 ~ 2024-08-27   |
|- 📋报告管理|                                      |
|- ⚙️系统设置| 📊 综合统计指标                       |
|          | ┌─────┬─────┬─────┬─────┬─────┐     |
|          | │总堆数│总体积│平均堆│最大堆│精度  │     |
|          | │ 24  │56,789│2,366 │8,945 │92.3%│     |
|          | │     │ m³  │ m³  │ m³  │     │     |
|          | └─────┴─────┴─────┴─────┴─────┘     |
|          |                                      |
|          | 📈 时间序列分析                        |
|          | [体积变化趋势图 - 可选择时间粒度]        |
|          | 时间粒度: [日▼] [周▼] [月▼]           |
|          |                                      |
|          | 🗺️ 空间分布热力图                      |
|          | [堆场平面图 - 显示堆体分布密度]         |
|          |                                      |
|          | 📋 详细堆体数据表                       |
|          | ┌─────┬────────┬──────┬──────┬─────┐ |
|          | │堆体ID│当前体积 │变化量 │变化率 │精度 │ |
|          | │     │ (m³)   │(m³)  │(%)   │(%) │ |
|          | ├─────┼────────┼──────┼──────┼─────┤ |
|          | │P001 │1,256.3 │+120.5│+10.6 │93.2 │ |
|          | │P002 │2,345.7 │-80.2 │-3.3  │91.8 │ |
|          | │P003 │  892.1 │+45.3 │+5.3  │94.1 │ |
|          | └─────┴────────┴──────┴──────┴─────┘ |
|          |                                      |
|          | 📊 质量分析报告                        |
+----------+---------------------------------------+
```

### 7. 报告管理 (report_management.html) - 自动化报告生成

```
+--------------------------------------------------+
| 天巡散货体积监测系统   [角色切换▼] 👤用户名        |
+----------+---------------------------------------+
|左侧导航   | 报告管理 - 智能报告生成系统             |
|- 🏠仪表盘 |                                      |
|- 📊数据管理| 📝 快速生成报告                        |
|- ⚙️任务管理| ┌─────────────────────────────────┐   |
|- 🎯三维展示| │ 📋 报告配置                      │   |
|- 📈结果分析| │ • 堆场: [龙口煤场▼] [多选支持]   │   |
|- 📋报告管理| │ • 类型: ○日报 ○周报 ○月报 ○定制  │   |
|- ⚙️系统设置| │ • 时间: [2024-08-20] 至 [今天]   │   |
|          | │                                │   |
|          | │ 🎨 报告模板                     │   |
|          | │ ○ 标准监测报告                  │   |
|          | │ ○ 对比分析报告                  │   |
|          | │ ○ 异常分析报告                  │   |
|          | │ ○ 自定义模板                   │   |
|          | │                                │   |
|          | │ 📊 包含内容                     │   |
|          | │ ☑️ 体积统计表                  │   |
|          | │ ☑️ 趋势分析图                  │   |
|          | │ ☑️ 三维模型截图                │   |
|          | │ ☑️ 精度评估                    │   |
|          | │ ☑️ 异常说明                    │   |
|          | │                                │   |
|          | │      [生成报告]                │   |
|          | └─────────────────────────────────┘   |
|          |                                      |
|          | 📚 历史报告库                          |
|          | 🔍 [搜索报告] 📅 [按日期▼] [按类型▼]  |
|          | ┌─────────┬──────────┬──────┬─────┐  |
|          | │报告编号  │生成时间   │类型   │操作  │  |
|          | ├─────────┼──────────┼──────┼─────┤  |
|          | │R20240827│2024-08-27│日报  │📥⏰📧│  |
|          | │R20240820│2024-08-20│周报  │📥⏰📧│  |
|          | │R20240801│2024-08-01│月报  │📥⏰📧│  |
|          | └─────────┴──────────┴──────┴─────┘  |
|          |                                      |
|          | ⚙️ 自动化设置                          |
|          | • 自动生成日报: [✅] 时间: [08:00]     |
|          | • 自动发送邮件: [✅] 收件人: [设置]     |
|          | • 异常自动报告: [✅] 阈值: [±5%]       |
+----------+---------------------------------------+
```

### 8. 系统设置 (system_settings.html) - 参数配置优化

```
+--------------------------------------------------+
| 天巡散货体积监测系统   [角色切换▼] 👤用户名        |
+----------+---------------------------------------+
|左侧导航   | 系统设置 - 参数配置与系统管理           |
|- 🏠仪表盘 | 📑 设置分类                            |
|- 📊数据管理| [🤖AI参数] [👥用户管理] [🔌接口] [📧通知]|
|- ⚙️任务管理|                                      |
|- 🎯三维展示| 🤖 AI算法参数调优                       |
|- 📈结果分析| ┌─────────────────────────────────┐   |
|- 📋报告管理| │ 🧠 DPM分堆算法                   │   |
|- ⚙️系统设置| │ • 分堆敏感度: [██████░░░░] 60%   │   |
|          | │ • 最小堆体积: [50] m³            │   |
|          | │ • 堆间距离阈值: [5.0] m           │   |
|          | │                                │   |
|          | │ 🧹 DPM自动清表算法                │   |
|          | │ • 清表置信度: [██████████] 90%   │   |
|          | │ • 干扰物类型: ☑️土堆 ☑️设备 ☑️车辆│   |
|          | │ • 边缘柔化: [3] 像素              │   |
|          | │                                │   |
|          | │ 📐 体积计算精度                   │   |
|          | │ • 网格精度: [0.1] m              │   |
|          | │ • 基准面检测: [自动▼]            │   |
|          | │ • 质量阈值: [90] %               │   |
|          | │                                │   |
|          | │    [恢复默认] [应用设置]          │   |
|          | └─────────────────────────────────┘   |
|          |                                      |
|          | 👥 用户与权限管理                       |
|          | ┌─────────┬──────┬──────────┬─────┐  |
|          | │用户名    │角色   │最后登录   │操作  │  |
|          | ├─────────┼──────┼──────────┼─────┤  |
|          | │admin    │超级  │2024-08-27│✏️🗑️│  |
|          | │zhangsan │角色1 │2024-08-26│✏️🗑️│  |
|          | │lisi     │角色2 │2024-08-25│✏️🗑️│  |
|          | └─────────┴──────┴──────────┴─────┘  |
|          | [➕添加用户] [🔑权限模板] [📊使用统计]  |
|          |                                      |
|          | 🔌 系统接口配置                        |
|          | • 天际航平台API: [✅已连接] [测试]     |
|          | • PDM客户端接口: [✅已连接] [配置]     |
|          | • 第三方集成: [⚙️高级设置]            |
+----------+---------------------------------------+
```

## 三、界面交互规范

### 3.1 色彩系统

- 主色调：#1890ff（蓝色）- 代表科技感和专业性
- 辅助色：
  - 成功：#52c41a（绿色）
  - 警告：#faad14（黄色）
  - 错误：#f5222d（红色）
  - 信息：#1890ff（蓝色）
- 中性色：
  - 背景：#f0f2f5
  - 边框：#d9d9d9
  - 文本：#000000（主要）、#666666（次要）、#999999（辅助）

### 3.2 字体规范

- 主标题：18px，加粗
- 次级标题：16px，加粗
- 正文：14px，常规
- 辅助文本：12px，常规
- 字体族：
  - 中文：PingFang SC, Microsoft YaHei
  - 英文：Segoe UI, Arial
  - 数字：DIN

### 3.3 图标系统

- 导航图标：24px
- 功能图标：16px
- 状态图标：14px
- 图标风格：线性图标，统一视觉语言

### 3.4 响应式设计

- 桌面端：≥1200px
- 平板端：≥768px且<1200px
- 移动端：<768px（有限支持）

## 四、组件设计规范

### 4.1 按钮

- 主要按钮：蓝色填充，白色文字
- 次要按钮：白色填充，蓝色边框和文字
- 文本按钮：无背景，蓝色文字
- 危险按钮：红色填充或边框

## 五、设计优化要点

### 5.1 相比老设计的主要改进

**1. 角色驱动设计**
- 明确区分角色1（全国监控）和角色2（堆场分析）
- 仪表盘专注宏观视图，结果分析专注深度分析
- 顶部角色切换器提供快速切换

**2. 工作流程清晰化**
- 任务管理中明确展示三种任务类型及其适用场景
- 每种任务类型都有详细的流程说明和使用提示
- 支持任务间的数据复用和工作流衔接

**3. 技术集成深度**
- PDM工具深度集成，支持断点续传
- AI算法参数可视化调节
- 三维展示支持复杂的手动清表操作

**4. 用户体验提升**
- 所有关键操作都有进度提示和状态反馈
- 异常处理更加友好，提供具体的解决方案
- 支持批量操作和快速操作入口

### 5.2 技术实现建议

**前端技术栈**：
- Vue.js 3 + TypeScript（响应式框架）
- Cesium（三维可视化）
- ECharts（图表展示）
- Element Plus（UI组件库）

**关键功能实现**：
- 三维模型加载优化（LOD、压缩）
- 实时任务状态更新（WebSocket）
- 大数据表格虚拟滚动
- 响应式设计适配移动端

**性能优化**：
- 组件懒加载
- 图片/模型资源CDN加速
- 本地缓存策略
- API请求防抖和缓存

### 4.2 表单

- 输入框高度：32px
- 标签对齐：右对齐
- 必填项：标签前添加红色星号
- 校验反馈：即时校验，错误提示在输入框下方

### 4.3 表格

- 表头背景：浅灰色
- 斑马纹：隔行使用不同背景色
- 分页：默认每页10条
- 操作列：固定在右侧

### 4.4 卡片

- 圆角：2px
- 阴影：轻微阴影效果
- 内边距：16px

## 五、特殊交互设计

### 5.1 三维场景交互

- 鼠标操作：
  - 左键拖拽：旋转视角
  - 右键拖拽：平移视角
  - 滚轮：缩放视角
- 键盘快捷键：
  - R：重置视角
  - F：聚焦选中对象
  - C：切换正交/透视投影

### 5.2 手动清表操作

- 工具栏：
  - 选择工具
  - 标记工具
  - 橡皮擦工具
  - 撤销/重做
- 标记方式：
  - 点击标记：单点标记
  - 框选标记：区域标记
  - 多边形标记：自定义区域

### 5.3 数据上传交互

- 拖拽上传：支持文件夹拖拽
- 断点续传：自动保存上传进度
- 上传队列：多文件并行上传
- 上传状态：实时显示上传速度和剩余时间

## 六、界面适配策略

### 6.1 多分辨率适配

- 流式布局：基于百分比的响应式设计
- 弹性盒模型：Flex布局实现灵活排列
- 媒体查询：针对不同设备类型定制样式

### 6.2 多设备支持

- 桌面优先：系统主要针对桌面环境优化
- 平板兼容：支持iPad等平板设备操作
- 移动设备：提供有限的查看功能

## 七、无障碍设计

### 7.1 键盘可访问性

- 焦点状态：清晰的焦点指示器
- Tab顺序：合理的Tab键导航顺序
- 快捷键：常用操作提供键盘快捷方式

### 7.2 屏幕阅读器支持

- ARIA标签：为复杂组件添加aria-label
- 语义化HTML：使用语义化标签构建页面结构
- 替代文本：为图像提供alt文本

## 八、性能优化

### 8.1 加载策略

- 懒加载：非首屏内容延迟加载
- 代码分割：按路由分割代码包
- 资源压缩：图片和静态资源压缩

### 8.2 渲染优化

- 虚拟列表：长列表使用虚拟滚动
- 防抖节流：搜索和滚动事件优化
- 缓存策略：本地缓存频繁使用的数据

---

*本文档版本：v1.0*  
*最后更新：2025-08-22*  
*维护者：UI设计团队*